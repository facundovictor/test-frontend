{"version":3,"sources":["_datamap.coffee","app.js","_menu.coffee","_radial.coffee","index.coffee"],"names":["circle_radius","cultural_blue","getLimits","limits","living_work_red","loadMap","locations","reloadMap","description","radius","country","city","fillKey","date","latitude","longitude","i","len","loc","max_latitude","max_longitude","min_latitude","min_longitude","length","max_long","min_long","max_lat","min_lat","map","mapElement","menu_btn","d3","select","Datamap","element","scope","responsive","geographyConfig","popupOnHover","highlightOnHover","borderWidth","bubblesConfig","fillOpacity","highlightFillColor","highlightBorderWidth","highlightBorderColor","fills","cultural","living","defaultFill","data","setProjection","options","max_distance","min_margin","new_center","new_lat","new_long","new_proportional_scale","new_scale","projection","Math","max","clientWidth","geo","mercator","center","scale","translate","offsetWidth","offsetHeight","path","bubbles","popupTemplate","on","evt","window","setTimeout","resize","innerHTML","registerToggleMenu","toggle_menu","menu","classed","languages_data","loadRadials","loadSingleRadial","reloadRadials","reloadSingleRadial","renderRadial","name","percent","radial","container","img","img_size_factor","new_flag_left","new_flag_top","new_image_dimension","size","diameter","render","getSize","width","style","display","clientHeight","top","left","elem","index","div","children","radialProgress","value","ref","results","selectAll","push","radials","onload","onresize"],"mappings":"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","file":"app.js","sourcesContent":["# @author facundovictor\n##############################################\n\n# Color of the map points\ncultural_blue = '#3665ff'\nliving_work_red = '#f92322'\n\n# Radius of the map points\ncircle_radius = 5\n\n# Points in the map.\nlocations = [\n    {\n        description: 'Visited Facundo',\n        radius: circle_radius,\n        country: 'Argentina',\n        city: 'Bahía Blanca',\n        fillKey: 'cultural',\n        date: '2015-12-12',\n        latitude: -38.608822,\n        longitude: -62.248535\n    },{\n        description: 'I danced tango and ate asado',\n        radius: circle_radius,\n        country: 'Argentina',\n        city: 'Buenos Aires',\n        fillKey: 'cultural',\n        date: '2015-12-15',\n        latitude: -34.640129,\n        longitude: -58.364868\n    },{\n        description: 'Visited the south of Brazil',\n        radius: circle_radius,\n        country: 'Brazil',\n        city: 'Porto Alegre',\n        fillKey: 'cultural',\n        date: '2014-03-24',\n        latitude: -30.083652,\n        longitude: -51.141357\n    },{\n        description: 'Visited the \"Jardim Botânico\"',\n        radius: circle_radius,\n        country: 'Brazil',\n        city: 'Curitiba',\n        fillKey: 'cultural',\n        date: '2014-03-24',\n        latitude: -25.442112,\n        longitude: -49.287415\n    },{\n        description: 'Visited the big ben',\n        radius: circle_radius,\n        country: 'England',\n        city: 'London',\n        fillKey: 'cultural',\n        date: '2011-09-02',\n        latitude: 51.302287,\n        longitude: 0.131836\n    },{\n        description: 'Visited Wat Phra Kaew',\n        radius: circle_radius,\n        country: 'Thailand',\n        city: 'Bangkok',\n        fillKey: 'cultural',\n        date: '2014-07-19',\n        latitude: 13.805409,\n        longitude: 100.437012\n    },{\n        description: 'Assisted to Carnaval',\n        radius: circle_radius,\n        country: 'Spain',\n        city: 'Las Palmas de Gran Canaria',\n        fillKey: 'cultural',\n        date: '2008-10-15',\n        latitude: 28.116729,\n        longitude: -15.422058\n    },{\n        description: 'Visited the Cathedral',\n        radius: circle_radius,\n        country: 'Portugal',\n        city: 'Lisbon',\n        fillKey: 'cultural',\n        date: '2008-11-24',\n        latitude: 38.756091,\n        longitude: -9.124146\n    },{\n        description: 'Visited the Alcazaba of Badajoz',\n        radius: circle_radius,\n        country: 'Spain',\n        city: 'Badajoz',\n        fillKey: 'cultural',\n        date: '2008-11-29',\n        latitude: 38.895041,\n        longitude: -6.9104\n    },{\n        description: 'Visited the \"Basilica of Our Lady of the PIllar\"',\n        radius: circle_radius,\n        country: 'Spain',\n        city: 'Zaragoza',\n        fillKey: 'cultural',\n        date: '2009-05-03',\n        latitude: 41.643927,\n        longitude: -0.802002\n    },{\n        description: 'Visited the Cathedral',\n        radius: circle_radius,\n        country: 'Spain',\n        city: 'Murcia',\n        fillKey: 'cultural',\n        date: '2014-02-21',\n        latitude: 37.965583,\n        longitude: -1.219482\n    },{\n        description: 'Gone to the beach',\n        radius: circle_radius,\n        country: 'Spain',\n        city: 'Palma',\n        fillKey: 'cultural',\n        date: '2014-09-10',\n        latitude: 39.508014,\n        longitude: 2.69165\n    },{\n        description: 'Visited the monument of the Martyrs',\n        radius: circle_radius,\n        country: 'Algeria',\n        city: 'Algiers',\n        fillKey: 'cultural',\n        date: '2015-01-15',\n        latitude: 36.778217,\n        longitude: 3.043213\n    },{\n        description: 'Visited the \"Sungai Petani Clock Tower\"',\n        radius: circle_radius,\n        country: 'Malaysia',\n        city: 'Sungai Petani',\n        fillKey: 'cultural',\n        date: '2014-07-10',\n        latitude: 5.659548,\n        longitude: 100.497437\n    },{\n        description: 'Visited the Nelum Pokuna Mahinda Rajapaksa Theatre',\n        radius: circle_radius,\n        country: 'Sri Lanka',\n        city: 'Colombo',\n        fillKey: 'cultural',\n        date: '2014-08-02',\n        latitude: 6.873938,\n        longitude: 79.93927\n    },{\n        description: 'Visited the Burj Khalifa',\n        radius: circle_radius,\n        country: 'United Arab Emirates',\n        city: 'Dubai',\n        fillKey: 'cultural',\n        date: '2015-02-12',\n        latitude: 25.189719,\n        longitude: 55.184326\n    },{\n        description: 'Visited the Trevi Fountain',\n        radius: circle_radius,\n        country: 'Italy',\n        city: 'Rome',\n        fillKey: 'cultural',\n        date: '2011-07-03',\n        latitude: 41.8987,\n        longitude: 12.501068\n    },{\n        description: 'Visited the Acropolis of Athens',\n        radius: circle_radius,\n        country: 'Greece',\n        city: 'Athens',\n        fillKey: 'cultural',\n        date: '2011-07-03',\n        latitude: 37.949071,\n        longitude: 23.731842\n    },{\n        description: 'My first amazing job',\n        radius: circle_radius,\n        country: 'Spain',\n        city: 'Mahón',\n        fillKey: 'cultural',\n        date: '2009-04-15',\n        latitude: 39.883265,\n        longitude: 4.306641\n    },{\n        description: 'Visited the Port',\n        radius: circle_radius,\n        country: 'Tunisia',\n        city: 'Bizerte',\n        fillKey: 'cultural',\n        date: '2009-09-15',\n        latitude: 37.291399,\n        longitude: 9.879456\n    },{\n        description: 'Visited my family',\n        radius: circle_radius,\n        country: 'Italy',\n        city: 'Sassati',\n        fillKey: 'cultural',\n        date: '2009-12-25',\n        latitude: 40.731389,\n        longitude: 8.521271\n    },{\n        description: 'Visited the Oude Kerk',\n        radius: circle_radius,\n        country: 'Netherlands',\n        city: 'Amsterdam',\n        fillKey: 'cultural',\n        date: '2009-12-25',\n        latitude: 52.325058,\n        longitude: 4.713135\n    },{\n        description: 'My second amazing work',\n        radius: circle_radius,\n        country: 'Brazil',\n        city: 'São Paulo',\n        fillKey: 'living',\n        date: '2013-05-10',\n        latitude: -23.557772,\n        longitude: -46.628723\n    },{\n        description: 'My third amazing work',\n        radius: circle_radius,\n        country: 'Brazil',\n        city: 'Campinas',\n        fillKey: 'living',\n        date: '2014-03-24',\n        latitude: -22.906618,\n        longitude: -47.046204\n    },{\n        description: 'My current awesome work',\n        radius: circle_radius,\n        country: 'Spain',\n        city: 'Valencia',\n        fillKey: 'living',\n        date: '2015-05-03',\n        latitude: 39.508014,\n        longitude: -0.362549\n    },{\n        description: 'My first amazing job',\n        radius: circle_radius,\n        country: 'Italy',\n        city: 'Cagliari',\n        fillKey: 'living',\n        date: '2009-03-10',\n        latitude: 39.200201,\n        longitude: 9.135132\n    }\n]\n\n\n# getLimits:\n#   Recovers a square of the map that covers all the map points.\ngetLimits = () ->\n    max_longitude = -180\n    min_longitude = 180\n    max_latitude = -90\n    min_latitude = 90\n\n    for loc in locations\n        min_longitude = loc.longitude if loc.longitude < min_longitude\n        max_longitude = loc.longitude if loc.longitude > max_longitude\n        min_latitude = loc.latitude if loc.latitude < min_latitude\n        max_latitude = loc.latitude if loc.latitude > max_latitude\n\n    {\n        max_long: max_longitude,\n        min_long: min_longitude,\n        max_lat: max_latitude\n        min_lat: min_latitude\n    }\n\nlimits = getLimits()\n\n# LoadMap:\n#   Loads the map with the Map points as bubbles.\nloadMap = ->\n    # Gets the HTML element where the map will be placed.\n    mapElement = d3.select '.map'\n\n    # Loads the map and stores it for redraw purposes\n    map = new Datamap({\n        element: mapElement[0][0],\n        scope: 'world',\n        responsive: true,\n        geographyConfig: {\n            popupOnHover: false,\n            highlightOnHover: false,\n            borderWidth: 0\n        },\n        bubblesConfig:{\n            borderWidth: 0,\n            fillOpacity: 1,\n            highlightFillColor: '#FFFFFF',\n            highlightBorderWidth: 2,\n            highlightBorderColor: '#000000'\n        },\n        fills:{\n            'cultural': cultural_blue,\n            'living': living_work_red,\n            defaultFill: '#e9eaea'\n        },\n        data: {\n            'cultural': {fillKey: 'cultural'},\n            'living': {fillKey: 'living'}\n        }\n        setProjection: (element, options) ->\n\n            # Gets the new center of the map (longitude, latitude)\n            new_long = (limits.max_long - limits.min_long)/2 + limits.min_long\n            new_lat = (limits.max_lat - limits.min_lat)/2 + limits.min_lat + 2\n            new_center = [new_long, new_lat]\n\n            # Greatest distance between axis.\n            max_distance = Math.max(\n                limits.max_long - limits.min_long,\n                limits.max_lat - limits.min_lat\n            )\n\n            # Proportion of the map relative to the greatest distance.\n            min_margin = 360 - max_distance\n            new_scale = 150 + min_margin * 150 / 360\n\n            # Proportion of the new scale relative to the 'clientWidth' of\n            # the map.\n            new_proportional_scale = new_scale * element.clientWidth / 900\n\n            # Sets the new projection for zooming.\n            projection = d3.geo.mercator()\n                .center(new_center)\n                .scale(new_proportional_scale)\n                .translate([\n                    element.offsetWidth / 2,\n                    element.offsetHeight / 2\n                ])\n\n            {\n                path: d3.geo.path().projection(projection),\n                projection: projection\n            }\n    })\n\n    # Loads the location points as map bubbles.\n    map.bubbles(locations, {\n        popupTemplate: (geo, data) ->\n            \"<div class=\\\"hoverinfo\\\"> #{data.description} \\\n             <br/> #{data.city}, #{data.country} \\\n             <br/>On #{data.date} </div>\"\n        }\n    )\n\n    # Get the menu button\n    menu_btn = d3.select '.content .menu-btn'\n\n    # Attaches the function to the 'click' event\n    menu_btn.on 'click.map', (evt) ->\n        window.setTimeout(\n            () ->\n                map.resize()\n        ,300)\n\n\n# reloadMap:\n#   Erases the map and recreates it\nreloadMap = () ->\n    # Gets the HTML element where the map will be placed.\n    mapElement = d3.select '.map'\n\n    # Erases the map\n    mapElement[0][0].innerHTML = ''\n\n    # Create it again\n    loadMap()\n\n","var circle_radius, cultural_blue, getLimits, limits, living_work_red, loadMap, locations, reloadMap;\n\ncultural_blue = '#3665ff';\n\nliving_work_red = '#f92322';\n\ncircle_radius = 5;\n\nlocations = [\n  {\n    description: 'Visited Facundo',\n    radius: circle_radius,\n    country: 'Argentina',\n    city: 'Bahía Blanca',\n    fillKey: 'cultural',\n    date: '2015-12-12',\n    latitude: -38.608822,\n    longitude: -62.248535\n  }, {\n    description: 'I danced tango and ate asado',\n    radius: circle_radius,\n    country: 'Argentina',\n    city: 'Buenos Aires',\n    fillKey: 'cultural',\n    date: '2015-12-15',\n    latitude: -34.640129,\n    longitude: -58.364868\n  }, {\n    description: 'Visited the south of Brazil',\n    radius: circle_radius,\n    country: 'Brazil',\n    city: 'Porto Alegre',\n    fillKey: 'cultural',\n    date: '2014-03-24',\n    latitude: -30.083652,\n    longitude: -51.141357\n  }, {\n    description: 'Visited the \"Jardim Botânico\"',\n    radius: circle_radius,\n    country: 'Brazil',\n    city: 'Curitiba',\n    fillKey: 'cultural',\n    date: '2014-03-24',\n    latitude: -25.442112,\n    longitude: -49.287415\n  }, {\n    description: 'Visited the big ben',\n    radius: circle_radius,\n    country: 'England',\n    city: 'London',\n    fillKey: 'cultural',\n    date: '2011-09-02',\n    latitude: 51.302287,\n    longitude: 0.131836\n  }, {\n    description: 'Visited Wat Phra Kaew',\n    radius: circle_radius,\n    country: 'Thailand',\n    city: 'Bangkok',\n    fillKey: 'cultural',\n    date: '2014-07-19',\n    latitude: 13.805409,\n    longitude: 100.437012\n  }, {\n    description: 'Assisted to Carnaval',\n    radius: circle_radius,\n    country: 'Spain',\n    city: 'Las Palmas de Gran Canaria',\n    fillKey: 'cultural',\n    date: '2008-10-15',\n    latitude: 28.116729,\n    longitude: -15.422058\n  }, {\n    description: 'Visited the Cathedral',\n    radius: circle_radius,\n    country: 'Portugal',\n    city: 'Lisbon',\n    fillKey: 'cultural',\n    date: '2008-11-24',\n    latitude: 38.756091,\n    longitude: -9.124146\n  }, {\n    description: 'Visited the Alcazaba of Badajoz',\n    radius: circle_radius,\n    country: 'Spain',\n    city: 'Badajoz',\n    fillKey: 'cultural',\n    date: '2008-11-29',\n    latitude: 38.895041,\n    longitude: -6.9104\n  }, {\n    description: 'Visited the \"Basilica of Our Lady of the PIllar\"',\n    radius: circle_radius,\n    country: 'Spain',\n    city: 'Zaragoza',\n    fillKey: 'cultural',\n    date: '2009-05-03',\n    latitude: 41.643927,\n    longitude: -0.802002\n  }, {\n    description: 'Visited the Cathedral',\n    radius: circle_radius,\n    country: 'Spain',\n    city: 'Murcia',\n    fillKey: 'cultural',\n    date: '2014-02-21',\n    latitude: 37.965583,\n    longitude: -1.219482\n  }, {\n    description: 'Gone to the beach',\n    radius: circle_radius,\n    country: 'Spain',\n    city: 'Palma',\n    fillKey: 'cultural',\n    date: '2014-09-10',\n    latitude: 39.508014,\n    longitude: 2.69165\n  }, {\n    description: 'Visited the monument of the Martyrs',\n    radius: circle_radius,\n    country: 'Algeria',\n    city: 'Algiers',\n    fillKey: 'cultural',\n    date: '2015-01-15',\n    latitude: 36.778217,\n    longitude: 3.043213\n  }, {\n    description: 'Visited the \"Sungai Petani Clock Tower\"',\n    radius: circle_radius,\n    country: 'Malaysia',\n    city: 'Sungai Petani',\n    fillKey: 'cultural',\n    date: '2014-07-10',\n    latitude: 5.659548,\n    longitude: 100.497437\n  }, {\n    description: 'Visited the Nelum Pokuna Mahinda Rajapaksa Theatre',\n    radius: circle_radius,\n    country: 'Sri Lanka',\n    city: 'Colombo',\n    fillKey: 'cultural',\n    date: '2014-08-02',\n    latitude: 6.873938,\n    longitude: 79.93927\n  }, {\n    description: 'Visited the Burj Khalifa',\n    radius: circle_radius,\n    country: 'United Arab Emirates',\n    city: 'Dubai',\n    fillKey: 'cultural',\n    date: '2015-02-12',\n    latitude: 25.189719,\n    longitude: 55.184326\n  }, {\n    description: 'Visited the Trevi Fountain',\n    radius: circle_radius,\n    country: 'Italy',\n    city: 'Rome',\n    fillKey: 'cultural',\n    date: '2011-07-03',\n    latitude: 41.8987,\n    longitude: 12.501068\n  }, {\n    description: 'Visited the Acropolis of Athens',\n    radius: circle_radius,\n    country: 'Greece',\n    city: 'Athens',\n    fillKey: 'cultural',\n    date: '2011-07-03',\n    latitude: 37.949071,\n    longitude: 23.731842\n  }, {\n    description: 'My first amazing job',\n    radius: circle_radius,\n    country: 'Spain',\n    city: 'Mahón',\n    fillKey: 'cultural',\n    date: '2009-04-15',\n    latitude: 39.883265,\n    longitude: 4.306641\n  }, {\n    description: 'Visited the Port',\n    radius: circle_radius,\n    country: 'Tunisia',\n    city: 'Bizerte',\n    fillKey: 'cultural',\n    date: '2009-09-15',\n    latitude: 37.291399,\n    longitude: 9.879456\n  }, {\n    description: 'Visited my family',\n    radius: circle_radius,\n    country: 'Italy',\n    city: 'Sassati',\n    fillKey: 'cultural',\n    date: '2009-12-25',\n    latitude: 40.731389,\n    longitude: 8.521271\n  }, {\n    description: 'Visited the Oude Kerk',\n    radius: circle_radius,\n    country: 'Netherlands',\n    city: 'Amsterdam',\n    fillKey: 'cultural',\n    date: '2009-12-25',\n    latitude: 52.325058,\n    longitude: 4.713135\n  }, {\n    description: 'My second amazing work',\n    radius: circle_radius,\n    country: 'Brazil',\n    city: 'São Paulo',\n    fillKey: 'living',\n    date: '2013-05-10',\n    latitude: -23.557772,\n    longitude: -46.628723\n  }, {\n    description: 'My third amazing work',\n    radius: circle_radius,\n    country: 'Brazil',\n    city: 'Campinas',\n    fillKey: 'living',\n    date: '2014-03-24',\n    latitude: -22.906618,\n    longitude: -47.046204\n  }, {\n    description: 'My current awesome work',\n    radius: circle_radius,\n    country: 'Spain',\n    city: 'Valencia',\n    fillKey: 'living',\n    date: '2015-05-03',\n    latitude: 39.508014,\n    longitude: -0.362549\n  }, {\n    description: 'My first amazing job',\n    radius: circle_radius,\n    country: 'Italy',\n    city: 'Cagliari',\n    fillKey: 'living',\n    date: '2009-03-10',\n    latitude: 39.200201,\n    longitude: 9.135132\n  }\n];\n\ngetLimits = function() {\n  var i, len, loc, max_latitude, max_longitude, min_latitude, min_longitude;\n  max_longitude = -180;\n  min_longitude = 180;\n  max_latitude = -90;\n  min_latitude = 90;\n  for (i = 0, len = locations.length; i < len; i++) {\n    loc = locations[i];\n    if (loc.longitude < min_longitude) {\n      min_longitude = loc.longitude;\n    }\n    if (loc.longitude > max_longitude) {\n      max_longitude = loc.longitude;\n    }\n    if (loc.latitude < min_latitude) {\n      min_latitude = loc.latitude;\n    }\n    if (loc.latitude > max_latitude) {\n      max_latitude = loc.latitude;\n    }\n  }\n  return {\n    max_long: max_longitude,\n    min_long: min_longitude,\n    max_lat: max_latitude,\n    min_lat: min_latitude\n  };\n};\n\nlimits = getLimits();\n\nloadMap = function() {\n  var map, mapElement, menu_btn;\n  mapElement = d3.select('.map');\n  map = new Datamap({\n    element: mapElement[0][0],\n    scope: 'world',\n    responsive: true,\n    geographyConfig: {\n      popupOnHover: false,\n      highlightOnHover: false,\n      borderWidth: 0\n    },\n    bubblesConfig: {\n      borderWidth: 0,\n      fillOpacity: 1,\n      highlightFillColor: '#FFFFFF',\n      highlightBorderWidth: 2,\n      highlightBorderColor: '#000000'\n    },\n    fills: {\n      'cultural': cultural_blue,\n      'living': living_work_red,\n      defaultFill: '#e9eaea'\n    },\n    data: {\n      'cultural': {\n        fillKey: 'cultural'\n      },\n      'living': {\n        fillKey: 'living'\n      }\n    },\n    setProjection: function(element, options) {\n      var max_distance, min_margin, new_center, new_lat, new_long, new_proportional_scale, new_scale, projection;\n      new_long = (limits.max_long - limits.min_long) / 2 + limits.min_long;\n      new_lat = (limits.max_lat - limits.min_lat) / 2 + limits.min_lat + 2;\n      new_center = [new_long, new_lat];\n      max_distance = Math.max(limits.max_long - limits.min_long, limits.max_lat - limits.min_lat);\n      min_margin = 360 - max_distance;\n      new_scale = 150 + min_margin * 150 / 360;\n      new_proportional_scale = new_scale * element.clientWidth / 900;\n      projection = d3.geo.mercator().center(new_center).scale(new_proportional_scale).translate([element.offsetWidth / 2, element.offsetHeight / 2]);\n      return {\n        path: d3.geo.path().projection(projection),\n        projection: projection\n      };\n    }\n  });\n  map.bubbles(locations, {\n    popupTemplate: function(geo, data) {\n      return \"<div class=\\\"hoverinfo\\\"> \" + data.description + \" <br/> \" + data.city + \", \" + data.country + \" <br/>On \" + data.date + \" </div>\";\n    }\n  });\n  menu_btn = d3.select('.content .menu-btn');\n  return menu_btn.on('click.map', function(evt) {\n    return window.setTimeout(function() {\n      return map.resize();\n    }, 300);\n  });\n};\n\nreloadMap = function() {\n  var mapElement;\n  mapElement = d3.select('.map');\n  mapElement[0][0].innerHTML = '';\n  return loadMap();\n};\n\nvar registerToggleMenu;\n\nregisterToggleMenu = function() {\n  var menu_btn, toggle_menu;\n  toggle_menu = function(evt) {\n    var menu;\n    menu = d3.select('.menu');\n    if (menu.classed('hidden')) {\n      return menu.classed('hidden', false);\n    } else {\n      return menu.classed('hidden', true);\n    }\n  };\n  menu_btn = d3.select('.content .menu-btn');\n  return menu_btn.on('click.menu', toggle_menu);\n};\n\nvar languages_data, loadRadials, loadSingleRadial, reloadRadials, reloadSingleRadial, renderRadial;\n\nlanguages_data = [\n  {\n    name: 'brazil',\n    percent: 100\n  }, {\n    name: 'italy',\n    percent: 87.5\n  }, {\n    name: 'england',\n    percent: 75\n  }, {\n    name: 'spain',\n    percent: 75\n  }\n];\n\nrenderRadial = function(radial, container, img) {\n  var img_size_factor, new_flag_left, new_flag_top, new_image_dimension, size;\n  size = radial.diameter(container.clientWidth + 24).render().getSize();\n  img_size_factor = 0.9;\n  new_image_dimension = size.width / 2 * img_size_factor;\n  img.style.width = '' + new_image_dimension + 'px';\n  img.style.display = 'block';\n  new_flag_left = size.width / 2 - (new_image_dimension / 2) + 1;\n  new_flag_top = size.width / 2 - (img.clientHeight / 2) + 1;\n  img.style.top = '' + new_flag_top + 'px';\n  return img.style.left = '' + new_flag_left + 'px';\n};\n\nloadSingleRadial = function(elem, index) {\n  var div, img, radial;\n  img = elem.children[0];\n  div = elem.children[1];\n  radial = radialProgress(div).value(languages_data[index].percent);\n  renderRadial(radial, div, img);\n  return radial;\n};\n\nloadRadials = function() {\n  var elem, i, index, len, ref, results;\n  ref = (d3.selectAll('.languages-container .radial'))[0];\n  results = [];\n  for (index = i = 0, len = ref.length; i < len; index = ++i) {\n    elem = ref[index];\n    results.push(loadSingleRadial(elem, index));\n  }\n  return results;\n};\n\nreloadSingleRadial = function(radial, elem, index) {\n  var div, img;\n  img = elem.children[0];\n  div = elem.children[1];\n  div.innerHTML = '';\n  return renderRadial(radial, div, img);\n};\n\nreloadRadials = function(radials) {\n  var elem, i, index, len, ref, results;\n  ref = (d3.selectAll('.languages-container .radial'))[0];\n  results = [];\n  for (index = i = 0, len = ref.length; i < len; index = ++i) {\n    elem = ref[index];\n    results.push(reloadSingleRadial(radials[index], elem, index));\n  }\n  return results;\n};\n\nvar radials;\n\nradials = [];\n\nwindow.onload = function(evt) {\n  registerToggleMenu();\n  radials = loadRadials();\n  return loadMap();\n};\n\nwindow.onresize = function(evt) {\n  reloadRadials(radials);\n  return reloadMap();\n};\n","# @author facundovictor\n##############################################\n\n# registerToggleMenu:\n#   It registers the handler of the menu-btn.\nregisterToggleMenu = ->\n\n    # Toggle menu visibility\n    toggle_menu = (evt) ->\n        menu = d3.select '.menu'\n        if menu.classed 'hidden'\n            menu.classed('hidden',false)\n        else\n            menu.classed('hidden',true)\n\n\n    # Get the menu button\n    menu_btn = d3.select '.content .menu-btn'\n\n    # Attaches the function to the 'click' event\n    menu_btn.on 'click.menu', toggle_menu\n\n","# @author facundovictor\n################################################\n\n# Languages to be loaded\nlanguages_data = [\n    {name: 'brazil', percent: 100}\n    {name: 'italy', percent: 87.5}\n    {name: 'england', percent: 75}\n    {name: 'spain', percent: 75}\n]\n\n\n# renderRadial\n#   Given a radial element, its container and a inner image,\n#   It renders/reloads the radial inside the container with\n#   the given image.\nrenderRadial = (radial, container, img) ->\n\n    # Render the radial inside the container and gets its size.\n    size = radial.diameter(container.clientWidth + 24).render().getSize()\n\n    # Image size factor\n    img_size_factor = 0.9\n\n    # New iamge dimension.\n    new_image_dimension = size.width / 2 * img_size_factor\n    img.style.width = ''+new_image_dimension+'px'\n\n    # set the image visible\n    img.style.display = 'block'\n\n    # New image position.\n    new_flag_left = size.width / 2 - (new_image_dimension / 2) + 1\n    new_flag_top = size.width / 2 - (img.clientHeight / 2) + 1\n    img.style.top = ''+new_flag_top+'px'\n    img.style.left = ''+new_flag_left+'px'\n\n\n# Loads a single radial\nloadSingleRadial = (elem, index) ->\n    img = elem.children[0]\n    div = elem.children[1]\n    radial = radialProgress(div).value languages_data[index].percent\n    renderRadial radial, div, img\n    radial\n\n\n# Loads all radials\nloadRadials = ->\n    loadSingleRadial elem, index for elem, index in (d3.selectAll '.languages-container .radial')[0]\n\n\n# Reloads a single radial\nreloadSingleRadial = (radial, elem, index) ->\n    img = elem.children[0]\n    div = elem.children[1]\n    div.innerHTML = ''\n    renderRadial radial, div, img\n\n\n# Reloads all radials\nreloadRadials = (radials) ->\n    reloadSingleRadial radials[index], elem, index for elem, index in (d3.selectAll '.languages-container .radial')[0]\n    \n","# @author facundovictor\n##############################################\n\n# Here is stored the radial elements for redraw purposes\nradials = []\n\nwindow.onload = (evt) ->\n    # Configure the Hamburguer button to toggle the menu\n    # visibilty on click\n    registerToggleMenu()\n\n    # Load all radials and keeps it for redraw them on resize\n    radials = loadRadials()\n\n    # Load the map\n    loadMap()\n\nwindow.onresize = (evt) ->\n    # Reloads all stored radials\n    reloadRadials radials\n\n    # Resizes the map\n    reloadMap()\n"],"sourceRoot":"/source/"}